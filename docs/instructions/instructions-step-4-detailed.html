<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Etape 4 (détaillée) · React Lab</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;afficher-le-detail-d-une-experience-instructions-sommaires-docs-instructions-instructions-step-4-summary&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#afficher-le-detail-d-une-experience-instructions-sommaires-docs-instructions-instructions-step-4-summary&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Afficher le détail d&#x27;une expérience (&lt;a href=&quot;/docs/instructions/instructions-step-4-summary&quot;&gt;instructions sommaires&lt;/a&gt;)&lt;/h2&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Etape 4 (détaillée) · React Lab"/><meta property="og:type" content="website"/><meta property="og:url" content="https://reactlab.dev/"/><meta property="og:description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;afficher-le-detail-d-une-experience-instructions-sommaires-docs-instructions-instructions-step-4-summary&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#afficher-le-detail-d-une-experience-instructions-sommaires-docs-instructions-instructions-step-4-summary&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Afficher le détail d&#x27;une expérience (&lt;a href=&quot;/docs/instructions/instructions-step-4-summary&quot;&gt;instructions sommaires&lt;/a&gt;)&lt;/h2&gt;
"/><meta property="og:image" content="https://reactlab.dev/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://reactlab.dev/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg" alt="React Lab"/><h2 class="headerTitleWithLogo">React Lab</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/lab-intro" target="_self">Lab</a></li><li class=""><a href="/slides/" target="_self">Slides</a></li><li class=""><a href="/about" target="_self">A propos</a></li><li class=""><a href="https://github.com/reactlab-dev/reactlab" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Instructions détaillées</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Lab<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/lab-intro">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Instructions sommaires<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-1-summary">Etape 1 (sommaire)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-2-summary">Etape 2 (sommaire)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-3-summary">Etape 3 (sommaire)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-4-summary">Etape 4 (sommaire)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-5-summary">Etape 5 (sommaire)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-6-summary">Etape 6 (sommaire)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-7-summary">Etape 7 (sommaire)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-8-summary">Etape 8 (sommaire)</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Instructions détaillées<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-1-detailed">Etape 1 (détaillée)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-2-detailed">Etape 2 (détaillée)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-3-detailed">Etape 3 (détaillée)</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/instructions/instructions-step-4-detailed">Etape 4 (détaillée)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-5-detailed">Etape 5 (détaillée)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-6-detailed">Etape 6 (détaillée)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-7-detailed">Etape 7 (détaillée)</a></li><li class="navListItem"><a class="navItem" href="/docs/instructions/instructions-step-8-detailed">Etape 8 (détaillée)</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/reactlab-dev/reactlab/edit/master/docs/instructions/step-4-detailed.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Etape 4 (détaillée)</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="afficher-le-detail-d-une-experience-instructions-sommaires-docs-instructions-instructions-step-4-summary"></a><a href="#afficher-le-detail-d-une-experience-instructions-sommaires-docs-instructions-instructions-step-4-summary" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Afficher le détail d'une expérience (<a href="/docs/instructions/instructions-step-4-summary">instructions sommaires</a>)</h2>
<p>Nous souhaitons offir la possibilité à l'utilisateur d'avoir le détail d'une expérience en cliquant sur cette celle-ci. Un second clique sur l'expérience permet de revenir au summary (informations affichés dans les précédentes étapes). Une seul expérience peut avoir son détail affiché à un moment donné.</p>
<ul>
<li><p>React concepts utiles:</p>
<ul>
<li>Handling Events (div.onClick)</li>
<li>Conditional Rendering</li>
<li>Lifting State Up</li>
</ul></li>
<li><p>Refactorer le composant <code>ExperienceCard</code> en extrayant les <code>children</code> de la <code>&lt;div className={styles['experience-card']}&gt;</code>dans un component nommé <code>ExperienceSummary</code>. Un composant ne pouvant renvoyer qu'un <code>React.Element</code>, wrappez les <code>children</code> dans une <code>&lt;div&gt;&lt;/div&gt;</code> ou dans <code>&lt;&gt;&lt;/&gt;</code> le deuxieme choix ne crée aucun element html : <a href="https://reactjs.org/docs/fragments.html#short-syntax">voir ici</a></p></li>
</ul>
<pre><code class="hljs css language-tsx"><span class="hljs-comment">// ExperienceList.tsx</span>
<span class="hljs-keyword">const</span> ExperienceCard = <span class="hljs-function">(<span class="hljs-params">{ experience }: { experience: Experience }</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles[</span>'<span class="hljs-attr">experience-card</span>']}&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ExperienceSummary</span> <span class="hljs-attr">experience</span>=<span class="hljs-string">{experience}</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
);
const ExperienceSummary = ({
  experience: { name, description, location, organisation },
}: {
  experience: Experience;
}) =&gt; (
  <span class="hljs-tag">&lt;&gt;</span>
    {/* <span class="hljs-tag">&lt;&gt;</span> or <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span> */}
    <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles[</span>'<span class="hljs-attr">name</span>']}&gt;</span>{name}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles[</span>'<span class="hljs-attr">text</span>']}&gt;</span>{description}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles[</span>'<span class="hljs-attr">text</span>']}&gt;</span>{organisation}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles[</span>'<span class="hljs-attr">location</span>']}&gt;</span>{location}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    {/* <span class="hljs-tag">&lt;/&gt;</span> or <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> */}
  <span class="hljs-tag">&lt;/&gt;</span>
);
</span></code></pre>
<ul>
<li>Pour afficher les détails vous devez vous servir du component <code>ExperienceDetails</code> se trouvant dans <a href="./front/src/experience/ExperienceDetails.tsx">./front/src/experience/ExperienceDetails.tsx</a>. Ce dernier prend en <code>props</code> une experience de type <code>Experience</code></li>
</ul>
<pre><code class="hljs css language-tsx"><span class="hljs-comment">// Exemple</span>
<span class="hljs-comment">// ExperienceList.tsx</span>

<span class="hljs-keyword">import</span> Details <span class="hljs-keyword">from</span> <span class="hljs-string">'./ExperienceDetails'</span>;
<span class="hljs-comment">/*
 * ...
 * ...
 * ...
 */</span>
<span class="hljs-keyword">const</span> ExperienceCard = <span class="hljs-function">(<span class="hljs-params">{ experience }: { experience: Experience }</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles[</span>'<span class="hljs-attr">experience-card</span>']}&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Details</span> <span class="hljs-attr">experience</span>=<span class="hljs-string">{experience}</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
);
</span></code></pre>
<ul>
<li><p>Lors d'un clic sur une <code>ExperienceCard</code> vous devez :</p>
<ul>
<li>Affichez le composant <code>ExperienceDetails</code> à la place du composant <code>ExperienceSummary</code>. Afin de faire cela utilisez le concept de <code>Conditional Rendering</code>.</li>
<li>Un second clic sur <code>ExperienceCard</code> permet de ré-afficher le summary (<code>ExperienceSummary</code>)</li>
<li>Pour mémoire, une seule expérience peut avoir son détail afficher à un instant t. Par exemple, je clique pour ouvrir le détail de l'expérience 'crème de la crème', ce dernier s'ouvre, je clique sur l'expérience BNP alors le detail de l'expérience 'crème de la crème' se ferme et celui de BNP s'ouvre.</li>
</ul></li>
<li><p>Vous aurez besoin d'ajouter deux 'props' à votre composant <code>ExperienceCard</code> :</p>
<ul>
<li><code>onClick</code> afin de stocker dans le composant <code>ExperienceList</code> quelle <code>ExperienceCard</code> doit afficher les détails</li>
<li><code>showDetails</code> afin de préciser à une <code>ExperienceCard</code> si elle affiche <code>ExperienceDetails</code> ou <code>ExperienceSummary</code></li>
</ul></li>
</ul>
<pre><code class="hljs css language-tsx">const <span class="hljs-type">ExperienceCard</span> = ({
  experience,
  showDetails,
  onClick,
}: {
  experience: <span class="hljs-type">Experience</span>;
  showDetails: boolean;
  onClick: <span class="hljs-literal">()</span> =&gt; void;
}) =&gt; (
  &lt;div
    className={styles[<span class="hljs-symbol">'experience</span>-card']}
    onClick={<span class="hljs-literal">()</span> =&gt; {
      /* here call onClick from the props */
    }}
  &gt;
    {/*
     * <span class="hljs-type">Here</span> you have <span class="hljs-keyword">to</span> display
     * <span class="hljs-type">`ExperienceDetails</span>` <span class="hljs-keyword">if</span> showDetails === <span class="hljs-literal">false</span>
     * <span class="hljs-type">`ExperienceSummary</span>` <span class="hljs-keyword">if</span> showDetails === <span class="hljs-literal">true</span>
     */}
  &lt;/div&gt;
);
</code></pre>
<ul>
<li>Dans le composant <code>ExperienceList</code> ajoutez <code>detailsShowedExperienceId?: string</code> au state de la class. Vous y garderez l'id de la dernière Experience cliqué.</li>
</ul>
<pre><code class="hljs css language-tsx"><span class="hljs-comment">// ExperienceList.tsx</span>
<span class="hljs-comment">// in the return of render() function</span>

<span class="hljs-comment">/*
 * ...
 */</span>
&lt;<span class="hljs-selector-tag">div</span> className={styles[<span class="hljs-string">'list-container'</span>]}&gt;
  {this<span class="hljs-selector-class">.state</span><span class="hljs-selector-class">.experiences</span><span class="hljs-selector-class">.map</span>(experience =&gt; (
    &lt;ExperienceCard
      experience={experience}
      key={experience.id}
      showDetails={<span class="hljs-comment">/* give the apropriate expression  */</span>}
      onClick={() =&gt; {
        <span class="hljs-comment">// here store the new selected id in the state</span>
        <span class="hljs-comment">// (or remove it if it's the same)</span>
      }}
    /&gt;
  ))}
&lt;/div&gt;
<span class="hljs-comment">/*
 * ...
 */</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/instructions/instructions-step-3-detailed"><span class="arrow-prev">← </span><span>Etape 3 (détaillée)</span></a><a class="docs-next button" href="/docs/instructions/instructions-step-5-detailed"><span>Etape 5 (détaillée)</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#afficher-le-detail-d-une-experience-instructions-sommaires-docs-instructions-instructions-step-4-summary">Afficher le détail d'une expérience (<a href="/docs/instructions/instructions-step-4-summary">instructions sommaires</a>)</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.svg" alt="React Lab" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/lab-intro.html">Introduction</a><a href="/docs/en/instructions/instructions-step-1-summary">Instructions sommaires</a><a href="/docs/en/instructions/instructions-step-1-detailed.html">Instructions détaillées</a></div><div><h5>More</h5><a href="https://github.com/reactlab-dev/reactlab">GitHub</a><a class="github-button" href="https://github.com/reactlab-dev/reactlab" data-icon="octicon-star" data-count-href="/reactlab-dev/reactlab/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Thierry Abaléa &amp; Eliott Balette (2019)</section></footer></div></body></html>